---
import config from '@/consts'
import AuthorInfoCard from '@/theme/components/AuthorInfo/AuthorInfoCard.astro'
import TagPercentage from '@/theme/components/AuthorInfo/TagPercentage.astro'
import BaseHead from '@/theme/components/BaseHead.astro'
import ScrollArea from '@/theme/components/ScrollArea.astro'
import { getSafePostsInfo } from '@/theme/lib/post'
import { getCollection } from 'astro:content'
import Header from '../components/Header.astro'
import { getLanguageCode } from '../lib/utils'
import '@/theme/styles/global.scss'

const posts = await getSafePostsInfo(getCollection('blog'))
---

<!doctype html>
<html lang={getLanguageCode()}>
  <head>
    <BaseHead title={config.site.title} description={config.site.description} />
  </head>
  <body class="flex flex-col h-screen">
    <Header />
    <ScrollArea class="flex flex-1 w-full">
      <ScrollArea class="md:flex hidden basis-1/4 max-w-80 h-full p-1 md:p-2 flex-col gap-4">
        <AuthorInfoCard class="p-2 lg:p-4 lg:px-8" />
        <TagPercentage class="w-full lg:hidden" posts={posts} />
      </ScrollArea>
      <ScrollArea class="flex-1 h-full">
        <slot />
      </ScrollArea>
      <ScrollArea class="hidden lg:flex basis-1/4 max-w-80 h-full p-1 flex-col items-center">
        <section class="card w-full bg-base-100 p-1">
          <TagPercentage posts={posts} />
        </section>
      </ScrollArea>
    </ScrollArea>
  </body>
</html>
