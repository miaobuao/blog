---
import { getCollection } from 'astro:content'
import { pipe } from 'ramda'
import PostLayout from '@/theme/layouts/PostLayout.astro'
import { getSafePostsInfo } from '@/theme/lib/post'

export async function getStaticPaths() {
  const posts = await pipe(getCollection, getSafePostsInfo)('blog')
  return posts.map(post => ({
    params: { slug: post.slug },
    props: post,
  }))
}

interface Props {
  slug: string
}

const props = Astro.props
---

<PostLayout {...props} />
